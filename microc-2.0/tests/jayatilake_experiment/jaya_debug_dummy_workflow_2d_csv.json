{
  "version": "1.0",
  "name": "Jayatilake Debug Dummy Workflow - 2D CSV",
  "description": "Dummy workflow for debugging: each stage (except macrostep) has three debug functions that print their name and stage and read a message from a connected parameter node.",
  "metadata": {
    "author": "MicroCpy Team",
    "experiment": "Jayatilake Debug Dummy",
    "reference": "Debug-only workflow",
    "created": "2025-11-19",
    "notes": "Macrostep is kept identical to the main Jayatilake 2D CSV workflow. Debug functions are added in other stages."
  },
  "stages": {
    "initialization": {
      "enabled": true,
      "parameters": [
        {"id": "param_debug_init_1", "label": "Debug Init 1", "parameters": {"message": "[DEBUG] initialization: debug_initialization_1"}, "position": {"x": -150, "y": 50}},
        {"id": "param_debug_init_2", "label": "Debug Init 2", "parameters": {"message": "[DEBUG] initialization: debug_initialization_2"}, "position": {"x": -150, "y": 150}},
        {"id": "param_debug_init_3", "label": "Debug Init 3", "parameters": {"message": "[DEBUG] initialization: debug_initialization_3"}, "position": {"x": -150, "y": 250}}
      ],
      "functions": [
        {"id": "setup_sim", "function_name": "setup_simulation", "enabled": true, "parameters": {"name": "Jayatilake 2D CSV Debug", "duration": 0.5, "dt": 0.1, "output_dir": "results", "save_interval": 1, "diffusion_step": 1, "intracellular_step": 1, "intercellular_step": 1}},
        {"id": "setup_domain_node", "function_name": "setup_domain", "enabled": true, "parameters": {"dimensions": 2, "size_x": 500.0, "size_y": 500.0, "size_z": 400.0, "nx": 25, "ny": 25, "nz": 25, "cell_height": 20.0}},
        {"id": "add_oxygen", "function_name": "add_substance", "enabled": true, "parameters": {"substance_name": "Oxygen", "diffusion_coeff": 1.0e-9, "production_rate": 0.0, "uptake_rate": 3.0e-17, "initial_value": 0.07, "boundary_value": 0.07, "boundary_type": "fixed", "unit": "mM"}},
        {"id": "add_glucose", "function_name": "add_substance", "enabled": true, "parameters": {"substance_name": "Glucose", "diffusion_coeff": 6.70e-11, "production_rate": 0.0, "uptake_rate": 3.0e-15, "initial_value": 5.0, "boundary_value": 5.0, "boundary_type": "fixed", "unit": "mM"}},
        {"id": "add_lactate", "function_name": "add_substance", "enabled": true, "parameters": {"substance_name": "Lactate", "diffusion_coeff": 6.70e-11, "production_rate": 3.0e-15, "uptake_rate": 0.0, "initial_value": 1.0, "boundary_value": 1.0, "boundary_type": "fixed", "unit": "mM"}},
        {"id": "add_h", "function_name": "add_substance", "enabled": true, "parameters": {"substance_name": "H", "diffusion_coeff": 1.0e-9, "production_rate": 2.0e-20, "uptake_rate": 3.0e-15, "initial_value": 4e-5, "boundary_value": 4e-5, "boundary_type": "fixed", "unit": "mM"}},
        {"id": "add_ph", "function_name": "add_substance", "enabled": true, "parameters": {"substance_name": "pH", "diffusion_coeff": 1.0e-9, "production_rate": 0.0, "uptake_rate": 0.0, "initial_value": 7.4, "boundary_value": 7.4, "boundary_type": "fixed", "unit": "pH"}},
        {"id": "setup_env", "function_name": "setup_environment", "enabled": true, "parameters": {"ph": 7.4}},
        {"id": "setup_custom", "function_name": "setup_custom_parameters", "enabled": true, "parameters": {"cell_cycle_time": 240.0, "max_cell_age": 500.0, "max_atp": 30.0, "max_atp_rate": 1.0e-14, "atp_threshold": 0.8, "glyco_oxygen_ratio": 0.1, "proton_coefficient": 0.01, "glucose_factor": 2.0, "KG": 0.5, "KO2": 0.01, "KL": 1.0, "oxygen_vmax": 1.0e-16, "glucose_vmax": 3.0e-15, "necrosis_threshold_oxygen": 0.011, "necrosis_threshold_glucose": 0.23, "base_migration_rate": 0.0}},
        {"id": "assoc_oxygen", "function_name": "add_association", "enabled": true, "parameters": {"substance_name": "Oxygen", "gene_input": "Oxygen_supply", "threshold": 0.022}},
        {"id": "assoc_glucose", "function_name": "add_association", "enabled": true, "parameters": {"substance_name": "Glucose", "gene_input": "Glucose_supply", "threshold": 0.5}},
        {"id": "assoc_lactate", "function_name": "add_association", "enabled": true, "parameters": {"substance_name": "Lactate", "gene_input": "MCT1_stimulus", "threshold": 2.0}},
        {"id": "assoc_h", "function_name": "add_association", "enabled": true, "parameters": {"substance_name": "H", "gene_input": "Proton_level", "threshold": 0.00008}},
        {"id": "setup_gene_net", "function_name": "setup_gene_network", "enabled": true, "parameters": {"bnd_file": "jaya_microc.bnd", "propagation_steps": 500, "random_initialization": true}},
        {"id": "setup_pop", "function_name": "setup_population", "enabled": true, "parameters": {"enable_gene_network": true, "custom_functions_module": "jayatilake_experiment_cell_functions.py"}},
        {"id": "setup_out", "function_name": "setup_output", "enabled": true, "parameters": {"save_data_interval": 1, "save_plots_interval": 1, "save_final_plots": true, "save_initial_plots": true, "status_print_interval": 1, "save_cellstate_interval": 1}},
        {"id": "load_cells_csv", "function_name": "load_cells_from_csv", "enabled": true, "parameters": {"file_path": "tests/jayatilake_experiment/example_2d_cells.csv"}},
        {"id": "generate_initial_plots", "function_name": "generate_initial_plots", "enabled": true, "parameters": {}},
        {"id": "debug_init_1", "function_name": "debug_initialization_1", "parameters": {}, "parameter_nodes": ["param_debug_init_1"], "enabled": true, "position": {"x": 300, "y": 120}},
        {"id": "debug_init_2", "function_name": "debug_initialization_2", "parameters": {}, "parameter_nodes": ["param_debug_init_2"], "enabled": true, "position": {"x": 300, "y": 190}},
        {"id": "debug_init_3", "function_name": "debug_initialization_3", "parameters": {}, "parameter_nodes": ["param_debug_init_3"], "enabled": true, "position": {"x": 300, "y": 260}}
      ],
      "execution_order": ["setup_sim", "setup_domain_node", "add_oxygen", "add_glucose", "add_lactate", "add_h", "add_ph", "setup_env", "setup_custom", "assoc_oxygen", "assoc_glucose", "assoc_lactate", "assoc_h", "setup_gene_net", "setup_pop", "setup_out", "load_cells_csv", "generate_initial_plots", "debug_init_1", "debug_init_2", "debug_init_3"]
    },

    "macrostep": {
      "enabled": true,
      "steps": 1,
	      "parameters": [],
	      "functions": [
	        {
	          "id": "intracellular_step_node",
	          "function_name": "intracellular_step",
	          "description": "Intracellular Step wrapper (executes the intracellular stage)",
	          "parameters": {},
	          "enabled": true,
	          "step_count": 1
	        },
	        {
	          "id": "microenvironment_step_node",
	          "function_name": "microenvironment_step",
	          "description": "Microenvironment Step wrapper (executes the microenvironment stage)",
	          "parameters": {},
	          "enabled": true,
	          "step_count": 1
	        },
	        {
	          "id": "intercellular_step_node",
	          "function_name": "intercellular_step",
	          "description": "Intercellular Step wrapper (executes the intercellular stage)",
	          "parameters": {},
	          "enabled": true,
	          "step_count": 1
	        },
	        {
	          "id": "csv_export_node",
	          "function_name": "export_csv_checkpoint_conditional",
	          "description": "Export CSV checkpoints and substance fields at configured intervals",
	          "parameters": {},
	          "enabled": true
	        }
	      ],
	      "execution_order": [
	        "intracellular_step_node",
	        "microenvironment_step_node",
	        "intercellular_step_node",
	        "csv_export_node"
	      ]
    },

    "intracellular": {
      "enabled": true,
      "steps": 1,
      "parameters": [
        {"id": "param_debug_intra_1", "label": "Debug Intracellular 1", "parameters": {"message": "[DEBUG] intracellular: debug_intracellular_1"}, "position": {"x": -150, "y": 100}},
        {"id": "param_debug_intra_2", "label": "Debug Intracellular 2", "parameters": {"message": "[DEBUG] intracellular: debug_intracellular_2"}, "position": {"x": -150, "y": 200}},
        {"id": "param_debug_intra_3", "label": "Debug Intracellular 3", "parameters": {"message": "[DEBUG] intracellular: debug_intracellular_3"}, "position": {"x": -150, "y": 300}}
      ],
      "functions": [
        {"id": "debug_intra_1", "function_name": "debug_intracellular_1", "parameters": {}, "parameter_nodes": ["param_debug_intra_1"], "enabled": true, "position": {"x": 300, "y": 120}},
        {"id": "debug_intra_2", "function_name": "debug_intracellular_2", "parameters": {}, "parameter_nodes": ["param_debug_intra_2"], "enabled": true, "position": {"x": 300, "y": 190}},
        {"id": "debug_intra_3", "function_name": "debug_intracellular_3", "parameters": {}, "parameter_nodes": ["param_debug_intra_3"], "enabled": true, "position": {"x": 300, "y": 260}}
      ],
      "execution_order": ["debug_intra_1", "debug_intra_2", "debug_intra_3"]
    },

    "microenvironment": {
      "enabled": true,
      "steps": 1,
      "parameters": [
        {"id": "param_debug_micro_1", "label": "Debug Microenvironment 1", "parameters": {"message": "[DEBUG] microenvironment: debug_microenvironment_1"}, "position": {"x": -150, "y": 100}},
        {"id": "param_debug_micro_2", "label": "Debug Microenvironment 2", "parameters": {"message": "[DEBUG] microenvironment: debug_microenvironment_2"}, "position": {"x": -150, "y": 200}},
        {"id": "param_debug_micro_3", "label": "Debug Microenvironment 3", "parameters": {"message": "[DEBUG] microenvironment: debug_microenvironment_3"}, "position": {"x": -150, "y": 300}}
      ],
      "functions": [
        {"id": "debug_micro_1", "function_name": "debug_microenvironment_1", "parameters": {}, "parameter_nodes": ["param_debug_micro_1"], "enabled": true, "position": {"x": 300, "y": 120}},
        {"id": "debug_micro_2", "function_name": "debug_microenvironment_2", "parameters": {}, "parameter_nodes": ["param_debug_micro_2"], "enabled": true, "position": {"x": 300, "y": 190}},
        {"id": "debug_micro_3", "function_name": "debug_microenvironment_3", "parameters": {}, "parameter_nodes": ["param_debug_micro_3"], "enabled": true, "position": {"x": 300, "y": 260}}
      ],
      "execution_order": ["debug_micro_1", "debug_micro_2", "debug_micro_3"]
    },

    "intercellular": {
      "enabled": true,
      "steps": 1,
      "parameters": [
        {"id": "param_debug_inter_1", "label": "Debug Intercellular 1", "parameters": {"message": "[DEBUG] intercellular: debug_intercellular_1"}, "position": {"x": -150, "y": 100}},
        {"id": "param_debug_inter_2", "label": "Debug Intercellular 2", "parameters": {"message": "[DEBUG] intercellular: debug_intercellular_2"}, "position": {"x": -150, "y": 200}},
        {"id": "param_debug_inter_3", "label": "Debug Intercellular 3", "parameters": {"message": "[DEBUG] intercellular: debug_intercellular_3"}, "position": {"x": -150, "y": 300}}
      ],
      "functions": [
        {"id": "debug_inter_1", "function_name": "debug_intercellular_1", "parameters": {}, "parameter_nodes": ["param_debug_inter_1"], "enabled": true, "position": {"x": 300, "y": 120}},
        {"id": "debug_inter_2", "function_name": "debug_intercellular_2", "parameters": {}, "parameter_nodes": ["param_debug_inter_2"], "enabled": true, "position": {"x": 300, "y": 190}},
        {"id": "debug_inter_3", "function_name": "debug_intercellular_3", "parameters": {}, "parameter_nodes": ["param_debug_inter_3"], "enabled": true, "position": {"x": 300, "y": 260}}
      ],
      "execution_order": ["debug_inter_1", "debug_inter_2", "debug_inter_3"]
    },

    "finalization": {
      "enabled": true,
      "parameters": [
        {"id": "param_debug_final_1", "label": "Debug Finalization 1", "parameters": {"message": "[DEBUG] finalization: debug_finalization_1"}, "position": {"x": -150, "y": 100}},
        {"id": "param_debug_final_2", "label": "Debug Finalization 2", "parameters": {"message": "[DEBUG] finalization: debug_finalization_2"}, "position": {"x": -150, "y": 200}},
        {"id": "param_debug_final_3", "label": "Debug Finalization 3", "parameters": {"message": "[DEBUG] finalization: debug_finalization_3"}, "position": {"x": -150, "y": 300}}
      ],
      "functions": [
        {"id": "debug_final_1", "function_name": "debug_finalization_1", "parameters": {}, "parameter_nodes": ["param_debug_final_1"], "enabled": true, "position": {"x": 300, "y": 120}},
        {"id": "debug_final_2", "function_name": "debug_finalization_2", "parameters": {}, "parameter_nodes": ["param_debug_final_2"], "enabled": true, "position": {"x": 300, "y": 190}},
        {"id": "debug_final_3", "function_name": "debug_finalization_3", "parameters": {}, "parameter_nodes": ["param_debug_final_3"], "enabled": true, "position": {"x": 300, "y": 260}}
      ],
      "execution_order": ["debug_final_1", "debug_final_2", "debug_final_3"]
    }
  }
}

