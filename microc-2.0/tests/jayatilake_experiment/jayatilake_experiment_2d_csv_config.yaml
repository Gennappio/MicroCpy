# Jayatilake Metabolic Symbiosis Experiment - 2D CSV Version
# Demonstrates the new CSV initial state format for 2D simulations

# DEBUG FLAGS
debug_phenotype_detailed: false
log_simulation_status: true

# Domain configuration - 2D simulation with CSV initial state
domain:
  size_x: 500.0
  size_x_unit: "um"
  size_y: 500.0
  size_y_unit: "um"
  nx: 25
  ny: 25
  dimensions: 2
  cell_height: 20.0          # Cell size in micrometers (matches CSV metadata)
  cell_height_unit: "um"

# Time configuration
time:
  dt: 0.1
  end_time: 0.5  # Short run for testing
  diffusion_step: 1
  intracellular_step: 1
  intercellular_step: 1

# Diffusion solver configuration
diffusion:
  max_iterations: 1000
  tolerance: 1e-6
  solver_type: "steady_state"
  twodimensional_adjustment_coefficient: 1.0

# Output configuration
output:
  save_data_interval: 1
  save_plots_interval: 1
  save_final_plots: true
  save_initial_plots: true
  status_print_interval: 1
  save_cellstate_interval: 1

# Initial state configuration - CSV format for 2D
initial_state:
  file_path: "example_2d_cells.csv"  # Human-readable CSV format

# Substances (simplified for 2D demo)
substances:
  Oxygen:
    diffusion_coeff: 1.0e-9
    production_rate: 0.0
    uptake_rate: 3.0e-17
    initial_value: 0.07
    boundary_value: 0.07
    boundary_type: "fixed"
    unit: "mM"

  Glucose:
    diffusion_coeff: 6.70e-11
    production_rate: 0.0
    uptake_rate: 3.0e-15
    initial_value: 5.0
    boundary_value: 5.0
    boundary_type: "fixed"
    unit: "mM"

  Lactate:
    diffusion_coeff: 6.70e-11
    production_rate: 3.0e-15
    uptake_rate: 0.0
    initial_value: 1.0
    boundary_value: 1.0
    boundary_type: "fixed"
    unit: "mM"

  H:
    diffusion_coeff: 1.0e-9
    production_rate: 2.0e-20
    uptake_rate: 3.0e-15
    initial_value: 4e-5
    boundary_value: 4e-5
    boundary_type: "fixed"
    unit: "mM"

  pH:
    diffusion_coeff: 1.0e-9
    production_rate: 0.0
    uptake_rate: 0.0
    initial_value: 7.4
    boundary_value: 7.4
    boundary_type: "fixed"
    unit: "pH"

# Gene network configuration
gene_network:
  nodes:
    - mitoATP
    - glycoATP
    - Proliferation
    - Growth_Arrest
    - Apoptosis
    - Necrosis

  # Simplified gene network rules for 2D demo
  rules:
    mitoATP: "Oxygen > 0.02 and Glucose > 1.0"
    glycoATP: "Glucose > 0.5"
    Proliferation: "mitoATP or glycoATP"
    Growth_Arrest: "not (mitoATP or glycoATP)"
    Apoptosis: "Oxygen < 0.01 and Glucose < 0.1"
    Necrosis: "Oxygen < 0.005"

# Cell behavior parameters
cell_cycle_time: 24.0  # hours
max_cell_age: 48.0     # hours
atp_threshold: 0.5     # Normalized ATP threshold for division
max_atp_rate: 1.0e-15  # Maximum ATP production rate

# Custom functions module
custom_functions_module: "jayatilake_experiment_cell_functions"  # Updated name

# Population parameters
initial_cell_count: 13  # Matches the CSV file
max_population_size: 1000
