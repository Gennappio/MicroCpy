{
  "version": "1.0",
  "name": "Jayatilake Metabolic Symbiosis Workflow - 2D CSV",
  "description": "Workflow for 2D Jayatilake experiment using CSV initial state - metabolic symbiosis in cancer cells with ATP-based division and gene network phenotype determination",
  "metadata": {
    "author": "MicroCpy Team",
    "experiment": "Jayatilake Metabolic Symbiosis - 2D CSV Version",
    "reference": "Jayatilake et al. 'A computational model of metabolic symbiosis in cancer'",
    "created": "2025-11-14",
    "notes": "Uses CSV file for 2D cell initialization instead of VTK"
  },
  
  "stages": {
    "initialization": {
      "enabled": true,
      "functions": [
        {
          "id": "load_config_1",
          "function_name": "load_config_file",
          "description": "Load YAML configuration file and initialize simulation infrastructure",
          "parameters": {
            "config_file": "tests/jayatilake_experiment/jayatilake_experiment_2d_csv_config.yaml"
          },
          "enabled": true,
          "position": {"x": 100, "y": 50}
        },
        {
          "id": "load_csv_1",
          "function_name": "load_cells_from_csv",
          "description": "Load cells from CSV file (2D initial state)",
          "parameters": {
            "file_path": "tests/jayatilake_experiment/example_2d_cells.csv"
          },
          "enabled": true,
          "position": {"x": 100, "y": 150}
        }
      ],
      "execution_order": ["load_config_1", "load_csv_1"]
    },
    
    "intracellular": {
      "enabled": true,
      "functions": [
        {
          "id": "metabolism_1",
          "function_name": "update_metabolism",
          "description": "Update intracellular metabolism (ATP, metabolites)",
          "parameters": {},
          "enabled": true,
          "position": {"x": 100, "y": 200}
        },
        {
          "id": "gene_networks_1",
          "function_name": "update_gene_networks",
          "description": "Update gene networks based on environment (hypoxia, glycolysis genes)",
          "parameters": {},
          "enabled": true,
          "position": {"x": 100, "y": 250}
        },
        {
          "id": "phenotypes_1",
          "function_name": "update_phenotypes",
          "description": "Update cell phenotypes based on gene states (glycolytic vs oxidative)",
          "parameters": {},
          "enabled": true,
          "position": {"x": 100, "y": 300}
        },
        {
          "id": "remove_dead_1",
          "function_name": "remove_dead_cells",
          "description": "Remove cells with ATP below death threshold",
          "parameters": {},
          "enabled": true,
          "position": {"x": 100, "y": 350}
        }
      ],
      "execution_order": ["metabolism_1", "gene_networks_1", "phenotypes_1", "remove_dead_1"]
    },
    
    "diffusion": {
      "enabled": true,
      "functions": [
        {
          "id": "diffusion_solver_1",
          "function_name": "run_diffusion_solver",
          "description": "Run diffusion PDE solver (oxygen, glucose, lactate, H+, pH)",
          "parameters": {},
          "enabled": true,
          "position": {"x": 100, "y": 400}
        }
      ],
      "execution_order": ["diffusion_solver_1"]
    },

    "intercellular": {
      "enabled": true,
      "functions": [
        {
          "id": "cell_division_1",
          "function_name": "update_cell_division",
          "description": "ATP-based cell division (divide when ATP > threshold)",
          "parameters": {},
          "enabled": true,
          "position": {"x": 100, "y": 450}
        }
      ],
      "execution_order": ["cell_division_1"]
    },
    
    "finalization": {
      "enabled": true,
      "functions": [
        {
          "id": "generate_plots_1",
          "function_name": "generate_summary_plots",
          "description": "Generate all summary plots (heatmaps, timeseries, etc.)",
          "parameters": {},
          "enabled": true,
          "position": {"x": 100, "y": 500}
        },
        {
          "id": "print_summary_1",
          "function_name": "print_simulation_summary",
          "description": "Print simulation summary statistics",
          "parameters": {},
          "enabled": true,
          "position": {"x": 100, "y": 550}
        }
      ],
      "execution_order": ["generate_plots_1", "print_summary_1"]
    }
  }
}

