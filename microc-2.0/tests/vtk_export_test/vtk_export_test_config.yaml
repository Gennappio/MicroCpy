# VTK Export Test Configuration
# Tests the integrated VTK cubic cell export and H5 gene network export functionality

domain:
  size_x: 400.0
  size_x_unit: "um"
  size_y: 400.0
  size_y_unit: "um"
  nx: 20
  ny: 20
  dimensions: 2
  cell_height: 8.0          # Biological cell height/thickness
  cell_height_unit: "um"    # Match VTK export cell size

time:
  dt: 0.1
  end_time: 2.0
  diffusion_step: 2
  intracellular_step: 1
  intercellular_step: 5

# Diffusion solver configuration
diffusion:
  max_iterations: 1000
  tolerance: 1e-6
  solver_type: "steady_state"
  twodimensional_adjustment_coefficient: 1.0

# Output and saving configuration
output:
  save_data_interval: 5        # Save data every 5 steps
  save_plots_interval: 10      # Generate plots every 10 steps
  save_final_plots: true       # Always save plots at the end
  save_initial_plots: true     # Always save plots at the beginning
  status_print_interval: 5     # Print detailed status every 5 steps
  save_cellstate_interval: 5   # Save VTK/H5 cell states every 5 steps
  cell_size_um: 8.0            # Cell size for VTK export (8 Î¼m)

# Initial state configuration
initial_state:
  mode: "generate"             # "generate" or "load"
  file_path: null              # Path to initial state file (for load mode)
  save_initial_state: true     # Save initial state after generation

# Substances and their properties
substances:
  Oxygen:
    diffusion_coeff: 2.8e-9
    production_rate: 0.0
    uptake_rate: 3.0e-18
    initial_value: 0.2
    boundary_value: 0.2
    boundary_type: "fixed"
    unit: "mM"

  Glucose:
    diffusion_coeff: 6.7e-10
    production_rate: 0.0
    uptake_rate: 3.0e-15
    initial_value: 5.0
    boundary_value: 5.0
    boundary_type: "fixed"
    unit: "mM"

  Lactate:
    diffusion_coeff: 1.8e-10
    production_rate: 0.0
    uptake_rate: 0.0
    initial_value: 1.0
    boundary_value: 1.0
    boundary_type: "fixed"
    unit: "mM"

# Gene network configuration
gene_network:
  propagation_steps: 3
  random_initialization: true
  output_nodes: ["Proliferation", "Apoptosis", "Growth_Arrest"]

  nodes:
    # Input nodes
    Oxygen_supply:
      is_input: true
      default_state: true
    Glucose_supply:
      is_input: true
      default_state: true
    MCT1_stimulus:
      is_input: true
      default_state: false

    # Metabolic nodes
    Glycolysis:
      is_input: false
      default_state: false
      logic: "Glucose_supply"
    OXPHOS:
      is_input: false
      default_state: false
      logic: "Oxygen_supply"
    ATP:
      is_input: false
      default_state: false
      logic: "Glycolysis OR OXPHOS"
    mitoATP:
      is_input: false
      default_state: false
      logic: "OXPHOS"
    glycoATP:
      is_input: false
      default_state: false
      logic: "Glycolysis"

    # Fate nodes
    Proliferation:
      is_input: false
      default_state: false
      logic: "ATP AND Glucose_supply AND Oxygen_supply"
    Apoptosis:
      is_input: false
      default_state: false
      logic: "NOT ATP"
    Growth_Arrest:
      is_input: false
      default_state: false
      logic: "ATP AND NOT (Glucose_supply AND Oxygen_supply)"
  
# Substance-gene associations
associations:
  Oxygen: "Oxygen_supply"
  Glucose: "Glucose_supply"
  Lactate: "MCT1_stimulus"

# Threshold configurations for gene network inputs
thresholds:
  Oxygen_supply:
    threshold: 0.022  # mM
  Glucose_supply:
    threshold: 0.5    # mM
  MCT1_stimulus:
    threshold: 2.0    # mM

# Required parameters
inputs:
  initial_cell_count: 20
  maximum_cell_count: 100

  # Basic cell parameters
  division_age_threshold: 24.0
  death_age_threshold: 72.0
  migration_energy_threshold: 0.5

output_dir: "results/vtk_export_test"
plots_dir: "plots/vtk_export_test"
data_dir: "data/vtk_export_test"
custom_functions_path: "vtk_export_test_custom_functions.py"
